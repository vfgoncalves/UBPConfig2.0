<app-navbar></app-navbar>
<form (ngSubmit)="onSubmit(); $event.preventDefault()">
  <div class="container centerform">
    <div class="form-group">
      <label for="nome">Nome:</label>
      <input type="text" id="nome" [ngClass]="getFormControlClass(nome.valid, nome.pristine)" placeholder="Nome" [formControl]="nome"
        required />
      <div class="invalid-feedback" [hidden]="nome.valid || nome.pristine">O campo Nome é obrigatório!</div>
    </div>

    <div class="form-group">
      <label for="descricao">Descrição:</label>
      <textarea id="descricao" [ngClass]="getFormControlClass(descricao.valid, descricao.pristine)" placeholder="Descrição" [formControl]="descricao"
        required></textarea>
      <div class="invalid-feedback" [hidden]="descricao.valid || descricao.pristine">O campo Descrição é obrigatório!</div>
    </div>

    <div class="form-group">
      <select id="empresa" [ngClass]="getFormControlSelectClass(empresa.valid, empresa.pristine)" [formControl]="empresa">        
        <option *ngFor="let emp of emps | async" value="{{emp.id}}">{{emp.nome}}</option>
      </select>      
      <div class="invalid-feedback" [hidden]="empresa.valid || empresa.pristine">É obrigatório selecionar uma empresa para ser vinculada ao sistema!</div>
    </div>

    <button type="submit" class="btn btn-primary btn-block" [disabled]="(nome.invalid || descricao.invalid || empresa.invalid) || salvando">Cadastrar
      <i *ngIf="salvando" class="fa fa-circle-o-notch fa-spin" style="font-size:15px"></i>
    </button>

    <br/>
    <div *ngIf="sucesso" class="alert alert-success" role="alert">
      Sistema cadastrada com sucesso!
    </div>
    <div *ngIf="erro" class="alert alert-danger" role="alert">
      Erro ao cadastrar o sistema, tente novamente!
    </div>
  </div>
</form>